<li class="dropdown right">
  <%= link_to("#", class: "dropdown-toggle", data: { toggle: "dropdown", "close-others" => "false" }) do %>
    <%= fa_icon('cog') %>
    <span>
      <%= t(:administrate) %>
    </span>
  <% end %>
  <ul class="dropdown-menu">
    <% if can? :manage, :all  %>
      <li class="dropdown-submenu">
        <%= link_to(t(:admin), nil) %>
        <ul class="dropdown-menu">
          <li><%= link_to(models_name(User), admin_users_path) %></li>
          <li><%= link_to(models_name(Menu), menus_path) %></li>
          <li><%= link_to(models_name(Constant), constants_path) %></li>
          <li><%= link_to(models_name(Permission), index_admin_permissions_path) %></li>
        </ul>
      </li>
    <% end %>
    <% if can? :modify, Contact %>
      <li class="dropdown-submenu">
        <%= link_to(model_name(Contact), nil) %>
        <ul class="dropdown-menu">
          <li><%= link_to(t(:index_attr, attr: models_name(Contact)), contacts_path) %></li>
          <li>
            <%= link_to(t(:new_attr, attr: model_name(Contact)), new_contact_path) %>
          </li>
        </ul>
      </li>
    <% end %>
    <% if can? :manage, Album %>
      <li class="dropdown-submenu">
        <%= link_to(model_name(Album), :admin_gallery_albums)%>
        <ul class="dropdown-menu">
          <li><%= link_to(t(:index, attr: models_name(Album)), admin_gallery_albums_path) %></li>
          <li><%= link_to(t(:new, attr: model_name(Album)), new_admin_gallery_album_path) %></li>
        </ul>
      </li>
    <% end %>
    <% if can? :manage, Page %>
      <li class="dropdown-submenu">
        <%= link_to(model_name(Page),:pages)%>
      </li>
    <% end %>

    <% if can? :manage, ShortLink %>
      <li class="dropdown-submenu">
        <%= link_to(models_name(ShortLink), :short_links) %>
      </li>
    <% end %>

    <% if can? :manage, Rent %>
      <li class="dropdown-submenu">
        <%= link_to(model_name(Rent),:admin_car)%>
      </li>
    <% end %>

    <% if can? :manage, Election %>
      <li class="dropdown-submenu">
        <%= link_to(model_name(Election),:admin_elections)%>
      </li>
    <% end %>

    <% if can? :modify, Event %>
      <li class="dropdown-submenu">
        <%= link_to(model_name(Event), nil) %>
        <ul class="dropdown-menu">
          <li><%= link_to(t(:index_attr, attr: models_name(Event)), admin_events_path) %></li>
          <li><%= link_to(t(:new_attr, attr: model_name(Event)), new_admin_event_path) %></li>
        </ul>
      </li>
    <% end %>

    <% if can? :modify, News %>
      <li class="dropdown-submenu">
        <%= link_to model_name(News), :new_news %>
      </li>
    <% end %>

    <% if can? :modify, Council %>
      <li class="dropdown-submenu">
        <a href=""><%=model_name(Council)%></a>
        <ul class="dropdown-menu">
          <% Council.titles.each do |council| %>
            <% if can? :manage, council %>
              <%= content_tag(:li, link_to(council, edit_council_path(council))) %>
            <% end %>
          <% end %>
        </ul>
      </li>
    <% end %>
    <% if can? :modify, Post %>
      <li class="dropdown-submenu">
        <%= link_to(models_name(Post), posts_path) %>
        <ul class="dropdown-menu">
          <% Council.titles.each do |council| %>
            <% if can? :manage, council %>
              <%= content_tag(:li, link_to(council, council_posts_path(council))) %>
            <% end %>
          <% end %>
        </ul>
      </li>
    <% end %>
    <% if can? :manage, CafeWork %>
      <li class="dropdown-submenu">
        <%= link_to(model_name(CafeWork), :admin_cafe_works)%>
      </li>
    <% end %>
  </ul>
</li>
