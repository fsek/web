<% if event.signup %>
  <% if event.attending(current_user) %>
    <span class="icon-lg attending-icon">
      <%= fa_icon('check-circle-o') %>
      <%= t('.is_attending') %><br>
    </span><br>
    <%= link_to(t('.cancel'), event_registration_path(event),
                              method: :delete,
                              class: 'btn danger',
                              data: { confirm: t('.confirm_cancel') }) %>
  <% elsif event.reserve(current_user) %>
    <span class="icon-lg pending-icon">
      <%= fa_icon('question-circle') %>
      <%= t('.is_pending', count: event.reserves.count) %><br>
      <% if event.last_reg.present? %>
        <%= Event.human_attribute_name(:last_reg) %>: <%= event.last_reg %>
        <br>
      <% end %>
      <%= link_to(t('.cancel'), event_registration_path(event),
                                method: :delete,
                                class: 'btn danger', 
                                data: { confirm: t('.confirm_cancel') }) %>
    </span>
  <% else %>
    <span class="icon-lg not-attending-icon">
      <%= fa_icon('question-circle') %>
      <%= t('.not_attending') %>
      <% if event.last_reg.present? %>
        <br>
        <%= Event.human_attribute_name(:last_reg) %>: <%= event.last_reg %>
      <% end %>
      <br>
      <%= simple_form_for(reg, url: event_registration_path(event)) do |f| %>
        <%= f.submit t('.submit_signup') %>
      <% end %>
    </span>
  <% end %>
  <br>
<% end %>

